{% load static %}
<div id="appealForm" class="modal" style="display: none;">
  <div class="modal-content">
    <!-- Карта -->
    <div class="map" id="map"></div>

    <!-- Форма -->
    <div class="form-container">
      <!-- Заголовок и крестик -->
      <div class="dialog-header">
        <div class="header-modal">Форма обращения</div>
        <span class="close-modal">&times;</span>
      </div>

      <!-- Первая часть: Ввод номера и подтверждение -->
      <div class="step1" id="step1">
        <div class="name_surname">
          <div class="name-field">
            <label for="lastName">Фамилия:</label>
            <input type="text" id="lastName" name="last_name" placeholder="Прим. Иванов" />
          </div>
          <div class="surname-field">
            <label for="firstName">Имя:</label>
            <input type="text" id="firstName" name="first_name" placeholder="Прим. Иван" />
          </div>
        </div>

        <div class="data">
          <div class="patronomyc">
            <label for="patronymic">Отчество:</label>
            <input type="text" id="patronymic" name="patronymic" placeholder="Прим. Иванович" />
          </div>
          <div class="phone">
            <label for="phone">Телефон:</label>
            <input type="text" id="phone" name="phone" />
          </div>
          <div class="SendCodeButton">
            <!-- Кнопка "Отправить код" -->
            <button id="sendCodeBtn">Отправить код</button>
          </div>
          <!-- Поле ввода кода подтверждения -->
          <div class="label-for__code">
            <label for="code">Код подтверждения:</label>
            <div class="code-inputs">
              <input type="text" maxlength="1" class="code-box" />
              <input type="text" maxlength="1" class="code-box" />
              <input type="text" maxlength="1" class="code-box" />
              <input type="text" maxlength="1" class="code-box" />
            </div>
              <button class="confirmCodeBtn" id="confirmCodeBtn" disabled>Подтвердить</button>
          </div>
        </div>
        <!-- Кнопка подтверждения -->
        <div class="confirm_button">
          <button class="confirmBtn" id="confirmBtn" disabled>Подтвердить</button>
        </div>

      </div>

      <!-- Вторая часть: Появляется только после подтверждения номера -->
      <div id="step2" style="display: none;">
        <select id="category" name="category">
          <option value="" hidden selected>Выберите категорию</option>
          {% for category in categories %}
          <option value="{{ category.id }}">{{ category.name }}</option>
          {% endfor %}
        </select>
        <label for="text">Текст обращения:</label>
        <textarea id="text" name="text"></textarea>

        <input type="file" id="fileInput" accept="image/*" multiple>
        <button id="uploadButton" disabled>Загрузить</button>
        <div class="preview hidden" id="previewContainer">
          <img class="previewImage" id="previewImage" src="" alt="Превью">
          <button id="deleteButton">Удалить</button>
        </div>

        <button id="saveBtn">Отправить обращение</button></form>
        </form>
      </div>
    </div>
  </div>
</div>