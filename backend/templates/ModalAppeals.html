{% load static %}
<!-- Добавляем Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<div id="appealForm" class="modal" style="display: none;">
  <div class="modal-content">
    <!-- Карта -->
    <div class="map" id="map"></div>

    <!-- Форма -->
    <div class="form-container">
      <span class="close-modal mobile-close">
        <i class="fa-solid fa-chevron-down mobile-icon"></i>
      </span>
      <!-- Заголовок и крестик -->
      <div class="dialog-header">
        <div class="header-modal">Форма обращения</div>
        <span class="close-modal desktop-close">
          <i class="fa-solid fa-xmark desktop-icon"></i>
        </span>
      </div>

      <!-- Первая часть: Ввод номера и подтверждение -->
      <div class="step1" id="step1">
        <div class="name_surname">
          <div class="name-field">
            <label for="lastName">Фамилия:</label>
            <input type="text" id="lastName" name="last_name" placeholder="Прим. Иванов" />
            <span class="error-message" id="lastNameError"></span>
          </div>
          <div class="surname-field">
            <label for="firstName">Имя:</label>
            <input type="text" id="firstName" name="first_name" placeholder="Прим. Иван" />
            <span class="error-message" id="firstNameError"></span>
          </div>
        </div>

        <div class="data">
          <div class="patronomyc">
            <label for="patronymic">Отчество:</label>
            <input type="text" id="patronymic" name="patronymic" placeholder="Прим. Иванович" />
            <span class="error-message" id="patronymicError"></span>

          </div>
          <div class="phone">
            <label for="phone">Телефон:</label>
            <input type="text" id="phone" name="phone" placeholder="+375 (XX) XXX-XX-XX" maxlength="19" />
            <span class="error-message" id="phoneError"></span>
          </div>
          <div class="SendCodeButton">
            <!-- Кнопка "Отправить код" -->
            <button id="sendCodeBtn" class="send-code-btn">Отправить код</button>
          </div>
          <!-- Поле ввода кода подтверждения -->
          <div class="label-for__code">
            <label for="code">Код подтверждения:</label>
            <div class="code-inputs">
              <input type="text" maxlength="1" class="code-box" />
              <input type="text" maxlength="1" class="code-box" />
              <input type="text" maxlength="1" class="code-box" />
              <input type="text" maxlength="1" class="code-box" />
            </div>
            <button class="confirmCodeBtn" id="confirmCodeBtn" disabled>Подтвердить</button>
          </div>
        </div>
        <!-- Кнопка подтверждения -->
        <div class="confirm_button">
          <button class="confirmBtn" id="confirmBtn" disabled>Перейти к обращению</button>
        </div>

      </div>

      <!-- Вторая часть: Появляется только после подтверждения номера -->
      <div id="step2" style="display: none;">
        <div class="category-text">
          <div class="selectCategory">
            <label for="category">Категория обращения</label>
            <select class="category" id="category" name="category">
              <option value="" hidden selected>Выберите категорию</option>
              {% for category in categories %}
              <option value="{{ category.id }}">{{ category.name }}</option>
              {% endfor %}
            </select>
            <span class="error-message" id="categoryError"></span>
          </div>
          <div class="text-appeal">
            <label for="text">Текст обращения:</label>
            <textarea class="text" id="text" name="text"></textarea>
          </div>
          <span class="error-message" id="textError"></span>
        </div>

        <div id="previewContainer" class="preview">
          <div class="images_preview">
            <label for="fileInput" class="add-photo">
              <span>+</span>
              <span>Добавить фото</span>
            </label>
          </div>
        </div>
        <input type="file" id="fileInput" accept="image/*" multiple style="display: none;">
        <div class="post-Button">
          <button class="postButton" id="saveBtn">Отправить обращение</button></form>
        </div>
        </form>
      </div>
    </div>
  </div>
</div>
